<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0ia7fl5" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.33.1" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.21.0">
  <bpmn:process id="examRegistration" name="exam-registration" isExecutable="true" camunda:historyTimeToLive="30">
    <bpmn:startEvent id="StartEvent_1" name="Course registration started">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="studentEmail" label="E-Mail" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="courseA" label="Course A" type="boolean" defaultValue="false">
            <camunda:validation />
          </camunda:formField>
          <camunda:formField id="courseB" label="Course B" type="boolean" defaultValue="false">
            <camunda:validation />
          </camunda:formField>
          <camunda:formField id="courseC" label="Course C" type="boolean" defaultValue="false">
            <camunda:validation />
          </camunda:formField>
        </camunda:formData>
        <camunda:executionListener delegateExpression="${initVariablesListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_13upj83</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_13upj83" sourceRef="StartEvent_1" targetRef="Event_14s0rvq" />
    <bpmn:businessRuleTask id="checkRegistrationDeadlineDMN" name="Check if registration is within deadline" camunda:resultVariable="registrationAllowed" camunda:decisionRef="checkExamRegistrationDeadline" camunda:mapDecisionResult="singleEntry">
      <bpmn:incoming>Flow_04dvgsy</bpmn:incoming>
      <bpmn:outgoing>Flow_1i5riaz</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:exclusiveGateway id="Gateway_1tu7dt0" name="justification accepted?">
      <bpmn:incoming>Flow_14h8smp</bpmn:incoming>
      <bpmn:outgoing>Flow_16khaca</bpmn:outgoing>
      <bpmn:outgoing>Flow_09a9q6e</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="userTaskOfficeCheck" name="Check justification" camunda:candidateGroups="examOffice">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="justification" label="Students Justification" type="string">
            <camunda:properties />
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="acceptJustification" label="Accept" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_10sq00o</bpmn:incoming>
      <bpmn:outgoing>Flow_14h8smp</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_1vnxayh" name="Registration stopped">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_047b1dt</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_05huf6g" name="cancel registration?">
      <bpmn:incoming>Flow_1hmth07</bpmn:incoming>
      <bpmn:outgoing>Flow_06r5348</bpmn:outgoing>
      <bpmn:outgoing>Flow_047b1dt</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="userTaskCancelOrApply" name="Select application with justification or cancel" camunda:candidateGroups="students">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="cancelRegistration" label="Cancel" type="boolean" defaultValue="false">
            <camunda:validation />
          </camunda:formField>
          <camunda:formField id="justification" label="Justification" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_09bc11a</bpmn:incoming>
      <bpmn:outgoing>Flow_1hmth07</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1lu1mxj" name="Registration in deadline?">
      <bpmn:incoming>Flow_1i5riaz</bpmn:incoming>
      <bpmn:outgoing>Flow_035de0m</bpmn:outgoing>
      <bpmn:outgoing>Flow_069pg5e</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:boundaryEvent id="Event_0dck6ee" name="after 7 days" attachedToRef="userTaskCancelOrApply">
      <bpmn:outgoing>Flow_0tsgbcm</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0xpbhhh">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P7D</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_14h8smp" sourceRef="userTaskOfficeCheck" targetRef="Gateway_1tu7dt0" />
    <bpmn:sequenceFlow id="Flow_16khaca" name="no" sourceRef="Gateway_1tu7dt0" targetRef="Event_04xds7p">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!acceptJustification}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_06r5348" name="no" sourceRef="Gateway_05huf6g" targetRef="Event_0z5g2c9">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!cancelRegistration}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_047b1dt" name="yes" sourceRef="Gateway_05huf6g" targetRef="Event_1vnxayh">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cancelRegistration}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1hmth07" sourceRef="userTaskCancelOrApply" targetRef="Gateway_05huf6g" />
    <bpmn:sequenceFlow id="Flow_035de0m" name="no" sourceRef="Gateway_1lu1mxj" targetRef="Event_0npinso">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!registrationAllowed}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_069pg5e" name="yes" sourceRef="Gateway_1lu1mxj" targetRef="Event_0flsh6y">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${registrationAllowed}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1i5riaz" sourceRef="checkRegistrationDeadlineDMN" targetRef="Gateway_1lu1mxj" />
    <bpmn:boundaryEvent id="Event_0ekkseq" name="Student not found" attachedToRef="initialExistenceCheck">
      <bpmn:outgoing>Flow_1fnck62</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1qliiyi" errorRef="Error_02i2fc5" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_04dvgsy" sourceRef="initialExistenceCheck" targetRef="checkRegistrationDeadlineDMN" />
    <bpmn:boundaryEvent id="Event_0tp9fim" name="Invalid Email Format" attachedToRef="initialExistenceCheck">
      <bpmn:outgoing>Flow_0cpos3f</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1ggbcdn" errorRef="Error_1i4qbxu" />
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="Event_1m14kdc" name="Stop process">
      <bpmn:incoming>Flow_0cpos3f</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0cpos3f" sourceRef="Event_0tp9fim" targetRef="Event_1m14kdc" />
    <bpmn:endEvent id="Event_04xds7p" name="Registration rejected">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_16khaca</bpmn:incoming>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0v26jo8" camunda:expression="${mailService.sendRejection(execution)}" />
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_07k6i3d" name="Registration successful">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0a7wlft</bpmn:incoming>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0ce46dv" camunda:expression="${mailService.sendConfirmation(execution)}" />
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_1u279ep" name="Registration stopped">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0tsgbcm</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0tsgbcm" sourceRef="Event_0dck6ee" targetRef="Event_1u279ep" />
    <bpmn:intermediateThrowEvent id="Event_14s0rvq" name="Status: &#10;Checking">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_13upj83</bpmn:incoming>
      <bpmn:outgoing>Flow_02yyfyv</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_02yyfyv" sourceRef="Event_14s0rvq" targetRef="initialExistenceCheck" />
    <bpmn:intermediateThrowEvent id="Event_0z5g2c9" name="Status: &#10;Exam office checking">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_06r5348</bpmn:incoming>
      <bpmn:outgoing>Flow_10sq00o</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_10sq00o" sourceRef="Event_0z5g2c9" targetRef="userTaskOfficeCheck" />
    <bpmn:intermediateThrowEvent id="Event_0npinso" name="Status: Justifying">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_035de0m</bpmn:incoming>
      <bpmn:outgoing>Flow_09bc11a</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_09bc11a" sourceRef="Event_0npinso" targetRef="userTaskCancelOrApply" />
    <bpmn:intermediateThrowEvent id="Event_0flsh6y" name="Status: Enrolling">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${statusListener}" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_069pg5e</bpmn:incoming>
      <bpmn:incoming>Flow_09a9q6e</bpmn:incoming>
      <bpmn:outgoing>Flow_0u1kbev</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_09a9q6e" sourceRef="Gateway_1tu7dt0" targetRef="Event_0flsh6y">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${acceptJustification}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0a7wlft" sourceRef="Activity_1dvcn7e" targetRef="Event_07k6i3d" />
    <bpmn:subProcess id="Activity_1dvcn7e" name="Enroll course">
      <bpmn:incoming>Flow_0u1kbev</bpmn:incoming>
      <bpmn:outgoing>Flow_0a7wlft</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics isSequential="true" camunda:collection="selectedCoursesList" camunda:elementVariable="course" />
      <bpmn:serviceTask id="Activity_0dz597f" name="Enroll course" camunda:delegateExpression="${enrollCourseDelegate}">
        <bpmn:extensionElements />
        <bpmn:incoming>Flow_0due5t0</bpmn:incoming>
        <bpmn:outgoing>Flow_10fghh9</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:startEvent id="Event_15qarr1" name="Enrolling started">
        <bpmn:outgoing>Flow_0due5t0</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_0due5t0" sourceRef="Event_15qarr1" targetRef="Activity_0dz597f" />
      <bpmn:endEvent id="Event_0tujmhb" name="Enrolling finished">
        <bpmn:incoming>Flow_10fghh9</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_10fghh9" sourceRef="Activity_0dz597f" targetRef="Event_0tujmhb" />
      <bpmn:endEvent id="Event_0l8l5i4" name="Enrolling finished">
        <bpmn:incoming>Flow_1vbd9z0</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_1vbd9z0" sourceRef="Activity_0tr9nn5" targetRef="Event_0l8l5i4" />
      <bpmn:userTask id="Activity_0tr9nn5" name="Enroll manually" camunda:candidateGroups="examOffice">
        <bpmn:extensionElements>
          <camunda:formData>
            <camunda:formField id="studentEmail" label="Student Email" type="string">
              <camunda:validation>
                <camunda:constraint name="readonly" />
              </camunda:validation>
            </camunda:formField>
            <camunda:formField id="course" label="Course" type="string">
              <camunda:validation>
                <camunda:constraint name="readonly" />
              </camunda:validation>
            </camunda:formField>
          </camunda:formData>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1x2t2up</bpmn:incoming>
        <bpmn:outgoing>Flow_1vbd9z0</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:intermediateThrowEvent id="Event_1a6yz20" name="late enrollment">
        <bpmn:incoming>Flow_03rnw4n</bpmn:incoming>
        <bpmn:outgoing>Flow_1x2t2up</bpmn:outgoing>
        <bpmn:escalationEventDefinition id="EscalationEventDefinition_1sbeek0" escalationRef="Escalation_3a24bmk" />
      </bpmn:intermediateThrowEvent>
      <bpmn:boundaryEvent id="Event_1ju9rn2" name="System Error" attachedToRef="Activity_0dz597f">
        <bpmn:outgoing>Flow_03rnw4n</bpmn:outgoing>
        <bpmn:errorEventDefinition id="ErrorEventDefinition_1bocq13" errorRef="Error_1kror9i" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_03rnw4n" sourceRef="Event_1ju9rn2" targetRef="Event_1a6yz20" />
      <bpmn:sequenceFlow id="Flow_1x2t2up" sourceRef="Event_1a6yz20" targetRef="Activity_0tr9nn5" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_0u1kbev" sourceRef="Event_0flsh6y" targetRef="Activity_1dvcn7e" />
    <bpmn:boundaryEvent id="Event_1tjji2a" name="late enrollment" cancelActivity="false" attachedToRef="Activity_1dvcn7e">
      <bpmn:outgoing>Flow_04kqqna</bpmn:outgoing>
      <bpmn:escalationEventDefinition id="EscalationEventDefinition_1tqjr6x" escalationRef="Escalation_3a24bmk" camunda:escalationCodeVariable="lateEnrollment" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_04kqqna" sourceRef="Event_1tjji2a" targetRef="Activity_01fffuw" />
    <bpmn:sendTask id="Activity_01fffuw" name="Inform student" camunda:expression="${mailService.sendLateEnrollment(execution)}">
      <bpmn:incoming>Flow_04kqqna</bpmn:incoming>
    </bpmn:sendTask>
    <bpmn:boundaryEvent id="Event_0yf971t" name="Course not found" attachedToRef="initialExistenceCheck">
      <bpmn:outgoing>Flow_0l6iwij</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1eyzkri" errorRef="Error_1ppmr49" />
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="Event_0ltedj7" name="Send Student not found">
      <bpmn:incoming>Flow_1fnck62</bpmn:incoming>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0a7dnu4" camunda:expression="${mailService.sendStudentNotFound(execution)}" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1fnck62" sourceRef="Event_0ekkseq" targetRef="Event_0ltedj7" />
    <bpmn:callActivity id="initialExistenceCheck" name="Initial existence check" calledElement="initialExistenceCheck">
      <bpmn:extensionElements>
        <camunda:in variables="all" />
        <camunda:out variables="all" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_02yyfyv</bpmn:incoming>
      <bpmn:outgoing>Flow_04dvgsy</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics isSequential="true" camunda:collection="selectedCoursesList" camunda:elementVariable="course" />
    </bpmn:callActivity>
    <bpmn:boundaryEvent id="Event_16ow9bg" name="Already enrolled" attachedToRef="initialExistenceCheck">
      <bpmn:outgoing>Flow_0kgevfg</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_036fzp1" errorRef="Error_1v7ezgj" />
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="Event_1xqmsso" name="Send already enrolled">
      <bpmn:incoming>Flow_0kgevfg</bpmn:incoming>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1hitmxl" camunda:expression="${mailService.sendAlreadyEnrolled(execution)}" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0kgevfg" sourceRef="Event_16ow9bg" targetRef="Event_1xqmsso" />
    <bpmn:endEvent id="Event_0j42wjx" name="Send Course Not Found">
      <bpmn:incoming>Flow_0l6iwij</bpmn:incoming>
      <bpmn:messageEventDefinition id="MessageEventDefinition_06vh9r9" camunda:expression="${mailService.sendCourseNotFound(execution)}" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0l6iwij" sourceRef="Event_0yf971t" targetRef="Event_0j42wjx" />
    <bpmn:textAnnotation id="TextAnnotation_1argorg">
      <bpmn:text>checks if student and course are valid and if the student is already registered to this course</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_09mglk5" associationDirection="None" sourceRef="initialExistenceCheck" targetRef="TextAnnotation_1argorg" />
  </bpmn:process>
  <bpmn:error id="Error_02i2fc5" name="Student not found" errorCode="STUDENT_NOT_FOUND" camunda:errorMessage="Student not found" />
  <bpmn:error id="Error_1ppmr49" name="Course not found" errorCode="COURSE_NOT_FOUND" camunda:errorMessage="Course not found" />
  <bpmn:error id="Error_1v7ezgj" name="Already enrolled" errorCode="ALREADY_ENROLLED" camunda:errorMessage="Already enrolled" />
  <bpmn:error id="Error_1kror9i" name="System Error" errorCode="SYSTEM_ERROR" />
  <bpmn:error id="Error_1i4qbxu" name="Invalid Email Format" errorCode="INVALID_EMAIL_FORMAT" camunda:errorMessage="Invalid Email Format" />
  <bpmn:error id="Error_0m6la08" name="Invalid email format" errorCode="INVALID_EMAIL_FORMAT" camunda:errorMessage="Wrong email format" />
  <bpmn:error id="Error_0fllyta" />
  <bpmn:escalation id="Escalation_3a24bmk" name="Late Enrollment" escalationCode="LATE_ENROLLMENT" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="examRegistration">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="162" y="312" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="154" y="355" width="55" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1jwh4wd_di" bpmnElement="checkRegistrationDeadlineDMN">
        <dc:Bounds x="770" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tu7dt0_di" bpmnElement="Gateway_1tu7dt0" isMarkerVisible="true">
        <dc:Bounds x="1555" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1553" y="475" width="54" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0qx8mlq_di" bpmnElement="userTaskOfficeCheck">
        <dc:Bounds x="1390" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1vnxayh_di" bpmnElement="Event_1vnxayh" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="1902" y="622" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1890" y="666" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_05huf6g_di" bpmnElement="Gateway_05huf6g" isMarkerVisible="true">
        <dc:Bounds x="1415" y="615" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1409" y="675" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0qnylg5_di" bpmnElement="userTaskCancelOrApply">
        <dc:Bounds x="1240" y="600" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1lu1mxj_di" bpmnElement="Gateway_1lu1mxj" isMarkerVisible="true">
        <dc:Bounds x="1015" y="305" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1004" y="268" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1m14kdc_di" bpmnElement="Event_1m14kdc" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <dc:Bounds x="532" y="132" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="457" y="128" width="65" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0lu8f08_di" bpmnElement="Event_04xds7p" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="1902" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1891" y="465" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xig86v_di" bpmnElement="Event_07k6i3d" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <dc:Bounds x="1902" y="312" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1893" y="355" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1u279ep_di" bpmnElement="Event_1u279ep" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="1902" y="722" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1891" y="765" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_14s0rvq_di" bpmnElement="Event_14s0rvq">
        <dc:Bounds x="402" y="312" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="397" y="276" width="46" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0z5g2c9_di" bpmnElement="Event_0z5g2c9">
        <dc:Bounds x="1422" y="522" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1361" y="520" width="58" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0npinso_di" bpmnElement="Event_0npinso">
        <dc:Bounds x="1112" y="622" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1090" y="665" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0flsh6y_di" bpmnElement="Event_0flsh6y">
        <dc:Bounds x="1562" y="312" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1539" y="288" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_12jre2h_di" bpmnElement="Event_1xqmsso" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <dc:Bounds x="632" y="132" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="677" y="136" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1j6kk66_di" bpmnElement="Event_0j42wjx" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <dc:Bounds x="632" y="502" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="677" y="526" width="85" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fc8due_di" bpmnElement="Activity_1dvcn7e">
        <dc:Bounds x="1720" y="290" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_003oluq_di" bpmnElement="Activity_01fffuw">
        <dc:Bounds x="1750" y="120" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1x3wyir_di" bpmnElement="Event_0ltedj7" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <dc:Bounds x="532" y="502" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="437" y="526" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0y9821w_di" bpmnElement="initialExistenceCheck">
        <dc:Bounds x="550" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1argorg_di" bpmnElement="TextAnnotation_1argorg">
        <dc:Bounds x="240" y="105" width="140" height="90" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_13zi939_di" bpmnElement="Event_16ow9bg">
        <dc:Bounds x="632" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="660" y="263" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1l22dn5_di" bpmnElement="Event_0yf971t">
        <dc:Bounds x="632" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="667" y="393" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0n2u3h5_di" bpmnElement="Event_1tjji2a">
        <dc:Bounds x="1782" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1813" y="263" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0w3212q_di" bpmnElement="Event_0tp9fim">
        <dc:Bounds x="532" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="478" y="246" width="63" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0sp1xup_di" bpmnElement="Event_0ekkseq">
        <dc:Bounds x="532" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="456" y="393" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_18q8jnm_di" bpmnElement="Event_0dck6ee">
        <dc:Bounds x="1322" y="662" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1261" y="693" width="58" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_13upj83_di" bpmnElement="Flow_13upj83" bioc:stroke="#205022" color:border-color="#205022">
        <di:waypoint x="198" y="330" />
        <di:waypoint x="402" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14h8smp_di" bpmnElement="Flow_14h8smp">
        <di:waypoint x="1490" y="440" />
        <di:waypoint x="1555" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_16khaca_di" bpmnElement="Flow_16khaca">
        <di:waypoint x="1605" y="440" />
        <di:waypoint x="1902" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1630" y="423" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06r5348_di" bpmnElement="Flow_06r5348">
        <di:waypoint x="1440" y="615" />
        <di:waypoint x="1440" y="558" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1443" y="590" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_047b1dt_di" bpmnElement="Flow_047b1dt">
        <di:waypoint x="1465" y="640" />
        <di:waypoint x="1902" y="640" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1563" y="622" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hmth07_di" bpmnElement="Flow_1hmth07">
        <di:waypoint x="1340" y="640" />
        <di:waypoint x="1415" y="640" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_035de0m_di" bpmnElement="Flow_035de0m">
        <di:waypoint x="1040" y="355" />
        <di:waypoint x="1040" y="640" />
        <di:waypoint x="1112" y="640" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1023" y="457" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_069pg5e_di" bpmnElement="Flow_069pg5e" bioc:stroke="#205022" color:border-color="#205022">
        <di:waypoint x="1065" y="330" />
        <di:waypoint x="1562" y="330" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1310" y="308" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1i5riaz_di" bpmnElement="Flow_1i5riaz" bioc:stroke="#205022" color:border-color="#205022">
        <di:waypoint x="870" y="330" />
        <di:waypoint x="1015" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04dvgsy_di" bpmnElement="Flow_04dvgsy" bioc:stroke="#205022" color:border-color="#205022">
        <di:waypoint x="650" y="330" />
        <di:waypoint x="770" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cpos3f_di" bpmnElement="Flow_0cpos3f" bioc:stroke="#831311" color:border-color="#831311">
        <di:waypoint x="550" y="272" />
        <di:waypoint x="550" y="168" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0tsgbcm_di" bpmnElement="Flow_0tsgbcm">
        <di:waypoint x="1340" y="698" />
        <di:waypoint x="1340" y="740" />
        <di:waypoint x="1902" y="740" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02yyfyv_di" bpmnElement="Flow_02yyfyv">
        <di:waypoint x="438" y="330" />
        <di:waypoint x="550" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10sq00o_di" bpmnElement="Flow_10sq00o">
        <di:waypoint x="1440" y="522" />
        <di:waypoint x="1440" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09bc11a_di" bpmnElement="Flow_09bc11a">
        <di:waypoint x="1148" y="640" />
        <di:waypoint x="1240" y="640" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09a9q6e_di" bpmnElement="Flow_09a9q6e">
        <di:waypoint x="1580" y="415" />
        <di:waypoint x="1580" y="348" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0a7wlft_di" bpmnElement="Flow_0a7wlft">
        <di:waypoint x="1820" y="330" />
        <di:waypoint x="1902" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0u1kbev_di" bpmnElement="Flow_0u1kbev">
        <di:waypoint x="1598" y="330" />
        <di:waypoint x="1720" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04kqqna_di" bpmnElement="Flow_04kqqna">
        <di:waypoint x="1800" y="272" />
        <di:waypoint x="1800" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fnck62_di" bpmnElement="Flow_1fnck62" bioc:stroke="#831311" color:border-color="#831311">
        <di:waypoint x="550" y="388" />
        <di:waypoint x="550" y="502" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_09mglk5_di" bpmnElement="Association_09mglk5">
        <di:waypoint x="550" y="320" />
        <di:waypoint x="355" y="195" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0kgevfg_di" bpmnElement="Flow_0kgevfg" bioc:stroke="#831311" color:border-color="#831311">
        <di:waypoint x="650" y="272" />
        <di:waypoint x="650" y="168" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0l6iwij_di" bpmnElement="Flow_0l6iwij" bioc:stroke="#831311" color:border-color="#831311">
        <di:waypoint x="650" y="388" />
        <di:waypoint x="650" y="502" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmndi:BPMNDiagram id="BPMNDiagram_0whduo3">
    <bpmndi:BPMNPlane id="BPMNPlane_04ea020" bpmnElement="Activity_1dvcn7e">
      <bpmndi:BPMNShape id="BPMNShape_1yijl36" bpmnElement="Activity_0dz597f">
        <dc:Bounds x="280" y="210" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_15qarr1_di" bpmnElement="Event_15qarr1">
        <dc:Bounds x="172" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="151" y="275" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0tujmhb_di" bpmnElement="Event_0tujmhb">
        <dc:Bounds x="682" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="661" y="275" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0l8l5i4_di" bpmnElement="Event_0l8l5i4">
        <dc:Bounds x="682" y="112" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="658" y="155" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04kah86_di" bpmnElement="Activity_0tr9nn5">
        <dc:Bounds x="500" y="90" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0k5x9ce_di" bpmnElement="Event_1a6yz20">
        <dc:Bounds x="362" y="112" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="347" y="82" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lbson6_di" bpmnElement="Event_1ju9rn2">
        <dc:Bounds x="362" y="192" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="407" y="203" width="65" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0due5t0_di" bpmnElement="Flow_0due5t0">
        <di:waypoint x="208" y="250" />
        <di:waypoint x="280" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10fghh9_di" bpmnElement="Flow_10fghh9">
        <di:waypoint x="380" y="250" />
        <di:waypoint x="682" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vbd9z0_di" bpmnElement="Flow_1vbd9z0">
        <di:waypoint x="600" y="130" />
        <di:waypoint x="682" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03rnw4n_di" bpmnElement="Flow_03rnw4n">
        <di:waypoint x="380" y="192" />
        <di:waypoint x="380" y="148" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1x2t2up_di" bpmnElement="Flow_1x2t2up">
        <di:waypoint x="398" y="130" />
        <di:waypoint x="500" y="130" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
